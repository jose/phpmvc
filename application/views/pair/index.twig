{% extends "_templates/base.twig" %}
{% block content %}

<!-- Progress-Bar -->
<div class="progress">
  <div class="progress-bar progress-bar-info active" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: {{ progress }}%">
    {{ progress }}% {{ constant('PROGRESS_BAR_INFO') }}
  </div>
</div>

<!-- A pair of test cases -->
<div class="row row-offcanvas">

  <h4>(instructions) <br/ > <br/ ></h4>

<form id="_form" role="form" method="post" action="{{ constant('URL') }}study/action">

  <!--
    TestCase A
  -->
  <div class="col-md-6">
    <div class="panel panel-default">
      <div class="panel-heading panel-heading-choose-option" data-toggle="buttons">
        {% if chosen_snippet_id == snippet_a_id %}
        <label class="btn btn-primary active" style="width:100%;">
          <input name="chosen_snippet_id" type="radio" id="{{ snippet_a_id }}" value="{{ snippet_a_id }}" autocomplete="off" checked>{{ constant('TEST_A') }}</input>
        </label>
        {% else %}
        <label class="btn btn-primary" style="width:100%;">
          <input name="chosen_snippet_id" type="radio" id="{{ snippet_a_id }}" value="{{ snippet_a_id }}" autocomplete="off">{{ constant('TEST_A') }}</input>
        </label>
        {% endif %}
      </div>
      <div class="panel-body">
        <pre class="scrollable_snippet"><code class="language-java">{{ snippet_a_source_code }}</code></pre>
      </div>
    </div>

    <!-- All Tags -->
    <div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="panel-title">{{ constant('TAGS') }}</h3>
      </div>
      <div class="panel-body">
        <div id="test_case_a_tags_container" class="bootstrap-tagsinput">
          {% for tag in tags %}
            <span id={{tag}} class="btn tag-item tag label label-info">{{tag}}</span>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- Like -->
    <div class="panel panel-success">
      <div class="panel-heading">
        <h3 class="panel-title">
          <i class="fa fa-thumbs-o-up" aria-hidden="true"></i>  Like</h3>
      </div>
      <div class="panel-body">
        <div id="scrollable-dropdown-menu">
          <div id="test_case_a_like-container" class="bootstrap-tagsinput draggable_container" style="padding: 0px;">
            <input name="test_case_a_like-container" class="input-tag tagsinput-typeahead" type="text" placeholder="Type a tag name" />
          </div>
        </div>
      </div>
    </div>

    <!-- Dislike -->
    <div class="panel panel-warning">
      <div class="panel-heading">
        <h3 class="panel-title">
          <i class="fa fa-thumbs-o-down" aria-hidden="true"></i>  Dislike</h3>
      </div>
      <div class="panel-body">
        <div id="test_case_a_dislike-container" class="bootstrap-tagsinput draggable_container" style="padding: 0px;">
          <input name="test_case_a_dislike-container" class="input-tag tagsinput-typeahead" type="text" placeholder="Type a tag name" />
        </div>
      </div>
    </div>
  </div>



  <!--
    TestCase B
  -->
  <div class="col-xs-6 col-sm-9 col-md-6">
    <div class="panel panel-default">
      <div class="panel-heading panel-heading-choose-option" data-toggle="buttons">
        {% if chosen_snippet_id == snippet_b_id %}
        <label class="btn btn-primary active" style="width:100%;">
          <input name="chosen_snippet_id" type="radio" id="{{ snippet_b_id }}" value="{{ snippet_b_id }}" autocomplete="off" checked>{{ constant('TEST_B') }}</input>
        </label>
        {% else %}
        <label class="btn btn-primary" style="width:100%;">
          <input name="chosen_snippet_id" type="radio" id="{{ snippet_b_id }}" value="{{ snippet_b_id }}" autocomplete="off">{{ constant('TEST_B') }}</input>
        </label>
        {% endif %}
      </div>
      <div class="panel-body">
        <pre class="scrollable_snippet"><code class="language-java">{{ snippet_b_source_code }}</code></pre>
      </div>
    </div>

    <!-- All Tags -->
    <div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="panel-title">{{ constant('TAGS') }}</h3>
      </div>
      <div class="panel-body">
        <div id="test_case_b_tags_container" class="bootstrap-tagsinput">
          {% for tag in tags %}
            <span id={{tag}} class="btn tag-item tag label label-info">{{tag}}</span>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- Like -->
    <div class="panel panel-success">
      <div class="panel-heading">
        <h3 class="panel-title">
          <i class="fa fa-thumbs-o-up" aria-hidden="true"></i>  Like</h3>
      </div>
      <div class="panel-body">
        <div id="scrollable-dropdown-menu">
          <div id="test_case_b_like-container" class="bootstrap-tagsinput draggable_container" style="padding: 0px;">
            <input name="test_case_b_like-container" class="input-tag tagsinput-typeahead" type="text" placeholder="Type a tag name" />
          </div>
        </div>
      </div>
    </div>

    <!-- Dislike -->
    <div class="panel panel-warning">
      <div class="panel-heading">
        <h3 class="panel-title">
          <i class="fa fa-thumbs-o-down" aria-hidden="true"></i>  Dislike</h3>
      </div>
      <div class="panel-body">
        <div id="test_case_b_dislike-container" class="bootstrap-tagsinput draggable_container" style="padding: 0px;">
          <input name="test_case_b_dislike-container" class="input-tag tagsinput-typeahead" type="text" placeholder="Type a tag name" />
        </div>
      </div>
    </div>
  </div>

  <div class="row center-block col-md-12">
    <p class="text-center">
      {% if (question_index == 0) and (question_index == total_num_questions) %}
        <button class="btn btn-primary" type="submit" name="submit" value="Submit" style="width: 100%;">{{ constant('SUBMIT') }}</button>
      {% elseif (question_index == 0) and (question_index != total_num_questions) %}
        <button class="btn btn-default" type="submit" name="submit" value="Next" style="width: 100%;">{{ constant('NEXT') }}</button>
      {% elseif (question_index > 0) and (question_index == total_num_questions) %}
        <button class="btn btn-default" type="submit" name="submit" value="Previous" style="width: 29.5%">{{ constant('PREVIOUS') }}</button>
        <button class="btn btn-primary" type="submit" name="submit" value="Submit" style="width: 69.5%;">{{ constant('SUBMIT') }}</button>
      {% elseif (question_index > 0) and (question_index != total_num_questions) %}
        <button class="btn btn-default" type="submit" name="submit" value="Previous" style="width: 29.5%">{{ constant('PREVIOUS') }}</button>
        <button class="btn btn-default" type="submit" name="submit" value="Next" style="width: 69.5%;">{{ constant('NEXT') }}</button>
      {% endif %}
    </p>
    <input type="text" class="form-control" name="time_to_answer" id="time_to_answer" value="" style="visibility:hidden;"/>
  </div>

</form>
</div>

<!-- keep session tags -->
<script type="text/javascript">
$(document).ready(function() {
  /**
   * Snippet A
   */
  {% for like in snippet_a_likes %}
    var tag = $('#test_case_a_tags_container').find({{like}}).text();
    $('#test_case_a_like-container').find('.tagsinput-typeahead').first().tagsinput('add', tag);
  {% endfor %}
  {% for dislike in snippet_a_dislikes %}
    var tag = $('#test_case_a_tags_container').find({{dislike}}).text();
    $('#test_case_a_dislike-container').find('.tagsinput-typeahead').first().tagsinput('add', tag);
  {% endfor %}
  /**
   * Snippet B
   */
  {% for like in snippet_b_likes %}
    var tag = $('#test_case_b_tags_container').find({{like}}).text();
    $('#test_case_b_like-container').find('.tagsinput-typeahead').first().tagsinput('add', tag);
  {% endfor %}
  {% for dislike in snippet_b_dislikes %}
    var tag = $('#test_case_b_tags_container').find({{dislike}}).text();
    $('#test_case_b_dislike-container').find('.tagsinput-typeahead').first().tagsinput('add', tag);
  {% endfor %}
});
</script>

{% endblock %}
